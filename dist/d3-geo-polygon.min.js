// https://github.com/d3/d3-geo-polygon v1.12.0 Copyright 2020 Mike Bostock
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array"),require("d3-geo")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-geo"],t):t(n.d3=n.d3||{},n.d3,n.d3)}(this,function(n,t,r){"use strict";function e(){}function o(n,t){return n&&t&&n[0]===t[0]&&n[1]===t[1]}function i(n,t,r,e){this.x=n,this.z=t,this.o=r,this.e=e,this.v=!1,this.n=this.p=null}function a(n){if(t=n.length){for(var t,r,e=0,o=n[0];++e<t;)o.n=r=n[e],r.p=o,o=r;o.n=r=n[0],r.p=o}}var u=Math.abs,c=Math.atan,l=Math.atan2,f=Math.cos,s=Math.exp,h=Math.floor,p=Math.log,g=Math.max,v=Math.min,d=Math.pow,m=Math.sign||function(n){return n>0?1:n<0?-1:0},y=Math.sin,M=Math.tan,P=1e-6,A=1e-12,E=Math.PI,G=E/2,x=E/4,w=Math.SQRT1_2,S=F(E),C=2*E,j=180/E,B=E/180;function D(n){return n>1?G:n<-1?-G:Math.asin(n)}function N(n){return n>1?0:n<-1?E:Math.acos(n)}function F(n){return n>0?Math.sqrt(n):0}function R(){this.reset()}R.prototype={constructor:R,reset:function(){this.s=this.t=0},add:function(n){I(b,n,this.t),I(this,b.s,this.s),this.s?this.t+=b.t:this.s=b.t},valueOf:function(){return this.s}};var b=new R;function I(n,t,r){var e=n.s=t+r,o=e-t,i=e-o;n.t=t-i+(r-o)}function T(n){return[l(n[1],n[0]),D(n[2])]}function q(n){var t=T(n);return[t[0]*j,t[1]*j]}function O(n){var t=n[0],r=n[1],e=f(r);return[e*f(t),e*y(t),y(r)]}function k(n){return O([n[0]*B,n[1]*B])}function z(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function L(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function _(n){var t=F(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function K(n,t){var r=t[0]-n[0],e=t[1]-n[1],o=t[2]-n[2];return r*r+e*e+o*o<A*A}var Q=new R;function V(n,t){var r=t[0],e=t[1],o=[y(r),-f(r),0],i=0,a=0;Q.reset();for(var u=0,c=n.length;u<c;++u)if(h=(s=n[u]).length)for(var s,h,p=s[h-1],g=p[0],v=p[1]/2+x,d=y(v),m=f(v),M=0;M<h;++M,g=G,d=S,m=j,p=A){var A=s[M],G=A[0],w=A[1]/2+x,S=y(w),j=f(w),B=G-g,N=B>=0?1:-1,F=N*B,R=F>E,b=d*S;if(Q.add(l(b*N*y(F),m*j+b*f(F))),i+=R?B+N*C:B,R^g>=r^G>=r){var I=L(O(p),O(A));_(I);var T=L(o,I);_(T);var q=(R^B>=0?-1:1)*D(T[2]);(e>q||e===q&&(I[0]||I[1]))&&(a+=R^B>=0?1:-1)}}return(i<-P||i<P&&Q<-P)^1&a}function W(n,r,u,c,l){return void 0===l&&(l=J),function(f){var s,h,p,g=r(f),v=function(){var n,t=[];return{point:function(t,r,e,o){var i=[t,r];arguments.length>2&&(i.index=e,i.t=o),n.push(i)},lineStart:function(){t.push(n=[])},lineEnd:e,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],n=null,r}}}(),d=r(v),m=!1,y={point:M,lineStart:A,lineEnd:E,polygonStart:function(){y.point=G,y.lineStart=x,y.lineEnd=w,h=[],s=[]},polygonEnd:function(){y.point=M,y.lineStart=A,y.lineEnd=E,h=t.merge(h);var n=V(s,c);h.length?(m||(f.polygonStart(),m=!0),function(n,t,r,e,u){var c,l,f=[],s=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,r,e=n[0],a=n[t];if(o(e,a)){for(u.lineStart(),c=0;c<t;++c)u.point((e=n[c])[0],e[1]);u.lineEnd()}else f.push(r=new i(e,n,null,!0)),s.push(r.o=new i(e,null,r,!1)),f.push(r=new i(a,n,null,!1)),s.push(r.o=new i(a,null,r,!0))}}),f.length){for(s.sort(t),a(f),a(s),c=0,l=s.length;c<l;++c)s[c].e=r=!r;for(var h,p,g=f[0];;){for(var v=g,d=!0;v.v;)if((v=v.n)===g)return;h=v.z,u.lineStart();do{if(v.v=v.o.v=!0,v.e){if(d)for(c=0,l=h.length;c<l;++c)u.point((p=h[c])[0],p[1]);else e(v.x,v.n.x,1,u);v=v.n}else{if(d)for(h=v.p.z,c=h.length-1;c>=0;--c)u.point((p=h[c])[0],p[1]);else e(v.x,v.p.x,-1,u);v=v.p}h=(v=v.o).z,d=!d}while(!v.v);u.lineEnd()}}}(h,l,n,u,f)):n&&(m||(f.polygonStart(),m=!0),u(null,null,1,f)),m&&(f.polygonEnd(),m=!1),h=s=null},sphere:function(){u(null,null,1,f)}};function M(t,r){n(t,r)&&f.point(t,r)}function P(n,t){g.point(n,t)}function A(){y.point=P,g.lineStart()}function E(){y.point=M,g.lineEnd()}function G(n,t,r){p.push([n,t]),d.point(n,t,r)}function x(){d.lineStart(),p=[]}function w(){G(p[0][0],p[0][1],!0),d.lineEnd();var n,t,r,e,o=d.clean(),i=v.result(),a=i.length;if(p.pop(),s.push(p),p=null,a)if(1&o){if((t=(r=i[0]).length-1)>0){for(m||(f.polygonStart(),m=!0),f.lineStart(),n=0;n<t;++n)f.point((e=r[n])[0],e[1]);f.lineEnd()}}else a>1&&2&o&&i.push(i.pop().concat(i.shift())),h.push(i.filter(H))}return y}}function H(n){return n.length>1}function J(n,t){return((n=n.x)[0]<0?n[1]-G-P:G-n[1])-((t=t.x)[0]<0?t[1]-G-P:G-t[1])}function U(n,t){this.from=n,this.to=t,this.normal=L(n,t),this.fromNormal=L(this.normal,n),this.toNormal=L(this.normal,t),this.l=N(z(n,t))}function X(n,t){if(K(n.from,t.from)||K(n.from,t.to))return n.from;if(K(n.to,t.from)||K(n.to,t.to))return n.to;var r=n.l+t.l<E?f(n.l+t.l)-P:-1;if(!(z(n.from,t.from)<r||z(n.from,t.to)<r||z(n.to,t.from)<r||z(n.to,t.to)<r)){var e=L(n.normal,t.normal);_(e);var o=z(e,n.fromNormal),i=z(e,n.toNormal),a=z(e,t.fromNormal),u=z(e,t.toNormal);return o>0&&i<0&&a>0&&u<0||o>=0&&i<=0&&a>=0&&u<=0&&(K(e,n.from)||K(e,n.to)||K(e,t.from)||K(e,t.to))?e:(e[0]=-e[0],e[1]=-e[1],e[2]=-e[2],i=-i,a=-a,u=-u,(o=-o)>0&&i<0&&a>0&&u<0||o>=0&&i<=0&&a>=0&&u<=0&&(K(e,n.from)||K(e,n.to)||K(e,t.from)||K(e,t.to))?e:void 0)}}var Y={};var Z=function(n){return n};function $(n){return function n(t){var r;if("MultiPolygon"===t.type)r=t.coordinates;else{if("Polygon"!==t.type)return Z;r=[t.coordinates]}var e=r.map(function(n){var t=function(n){return function(t,r){return V(n,[t,r])}}(n=n.map(nn)),r=function(n){var t,r,e=[];return n.forEach(function(n,o){return t=O(n),o&&e.push(new U(r,t)),r=t,n}),e}(n[0]);return W(t,function(n,t){return function(r){var e,o,i,a,c,l,s,h=[];return{lineStart:function(){e=null,l=1,s=[]},lineEnd:function(){c&&h.push(s),h.forEach(function(n){r.lineStart(),n.forEach(function(n){r.point(...n)}),r.lineEnd()}),h=[]},point:function(r,p,d){-1==f(r)&&(r-=1e-5*m(y(r))),d&&(r=o,p=i);var M,P,G,x,w,S,C,j,B,D=O([r,p]),N=c;if(e){var F=new U(e,D),R=[];for(P=0,G=100;P<n.length&&G>0;++P)if(x=n[P],M=X(F,x)){if(M===Y||K(M,e)||K(M,D)||K(M,x.from)||K(M,x.to)){w=1e-4,r=(r+3*E+en(P,G)*w)%(2*E)-E,p=v(E/2-1e-4,g(1e-4-E/2,p+en(P,G)*w)),F=new U(e,D=O([r,p])),P=-1,--G,R.length=0;continue}var b=T(M);M.distance=rn(e,M),M.index=P,M.t=rn(x.from,M),M[0]=b[0],M[1]=b[1],M.pop(),R.push(M)}if(R.length)for(l=0,R.sort(function(n,t){return n.distance-t.distance}),P=0;P<R.length;++P)M=R[P],(N=!N)?(s=[]).push([M[0],M[1],M.index,M.t]):(s.push([M[0],M[1],M.index,M.t]),h.push(s));N&&s.push([r,p])}else{for(P=0,G=100;P<n.length&&G>0;++P)x=n[P],j=void 0,B=void 0,j=z(S=D,(C=x).fromNormal),B=z(S,C.toNormal),S=z(S,C.normal),u(S)<A&&(j>-A&&B<A||j<A&&B>-A)&&(w=1e-4,r=(r+3*E+en(P,G)*w)%(2*E)-E,p=v(E/2-1e-4,g(1e-4-E/2,p+en(P,G)*w)),D=O([r,p]),P=-1,--G);a=N=t(o=r,i=p),N&&(s=[]).push([r,p])}e=D,c=N},clean:function(){return l|(a&&c)<<1}}}}(r,t),function(n,t){return function(r,e,o,i){if(null==r)i.polygonStart(),t.forEach(function(n){i.lineStart(),n.forEach(function(n){i.point(n[0],n[1])}),i.lineEnd()}),i.polygonEnd();else if(r.index!==e.index&&null!=r.index&&null!=e.index)for(var a=r.index;a!==e.index;a=(a+o+n.length)%n.length){var u=n[a],c=T(o>0?u.to:u.from);i.point(c[0],c[1])}else if(r.index===e.index&&r.t>e.t&&null!=r.index&&null!=e.index)for(a=0;a<n.length;a++)u=n[(r.index+a*o+n.length)%n.length],c=T(o>0?u.to:u.from),i.point(c[0],c[1])}}(r,n),n[0][0],tn)}),o=function(n){var t=e.map(t=>t(n));return{point:function(n,r){t.forEach(t=>t.point(n,r))},lineStart:function(){t.forEach(n=>n.lineStart())},lineEnd:function(){t.forEach(n=>n.lineEnd())},polygonStart:function(){t.forEach(n=>n.polygonStart())},polygonEnd:function(){t.forEach(n=>n.polygonEnd())},sphere:function(){t.forEach(n=>n.sphere())}}};return o.polygon=function(r){return r?n(t=r):t},o}(n)}function nn(n){return n.map(function(n){return[n[0]*B,n[1]*B]})}function tn(n,t){return n=n.x,t=t.x,n.index-t.index||n.t-t.t}function rn(n,t){var r=L(n,t);return l(F(z(r,r)),z(n,t))}function en(n,t){return m(y(100*n+t))}function on(n,t){var r=un(n[1],n[0]),e=un(t[1],t[0]),o=function(n,t){return l(n[0]*t[1]-n[1]*t[0],n[0]*t[0]+n[1]*t[1])}(r,e),i=cn(r)/cn(e);return an([1,0,n[0][0],0,1,n[0][1]],an([i,0,0,0,i,0],an([f(o),y(o),0,-y(o),f(o),0],[1,0,-t[0][0],0,1,-t[0][1]])))}function an(n,t){return[n[0]*t[0]+n[1]*t[3],n[0]*t[1]+n[1]*t[4],n[0]*t[2]+n[1]*t[5]+n[2],n[3]*t[0]+n[4]*t[3],n[3]*t[1]+n[4]*t[4],n[3]*t[2]+n[4]*t[5]+n[5]]}function un(n,t){return[n[0]-t[0],n[1]-t[1]]}function cn(n){return F(n[0]*n[0]+n[1]*n[1])}function ln(n,t){function e(n,r){var e,o=t(n,r),i=o.project([n*j,r*j]);return(e=o.transform)?[e[0]*i[0]+e[1]*i[1]+e[2],-(e[3]*i[0]+e[4]*i[1]+e[5])]:(i[1]=-i[1],i)}!function n(t,r){t.edges=function(n){for(var t=n.length,r=[],e=n[t-1],o=0;o<t;++o)r.push([e,e=n[o]]);return r}(t.face);if(r.face){var e=t.shared=function(n,t){for(var r,e,o=n.length,i=null,a=0;a<o;++a){r=n[a];for(var u=t.length;--u>=0;)if(e=t[u],r[0]===e[0]&&r[1]===e[1]){if(i)return[i,r];i=r}}}(t.face,r.face),i=on(e.map(r.project),e.map(t.project));t.transform=r.transform?an(r.transform,i):i;for(var a=r.edges,u=0,c=a.length;u<c;++u)o(e[0],a[u][1])&&o(e[1],a[u][0])&&(a[u]=t),o(e[0],a[u][0])&&o(e[1],a[u][1])&&(a[u]=t);for(a=t.edges,u=0,c=a.length;u<c;++u)o(e[0],a[u][0])&&o(e[1],a[u][1])&&(a[u]=r),o(e[0],a[u][1])&&o(e[1],a[u][0])&&(a[u]=r)}else t.transform=r.transform;t.children&&t.children.forEach(function(r){n(r,t)});return t}(n,{transform:null}),fn(n)&&(e.invert=function(r,e){var o=function n(r,e){var o=r.project.invert,i=r.transform,a=e;i&&(c=1/((u=i)[0]*u[4]-u[1]*u[3]),i=[c*u[4],-c*u[1],c*(u[1]*u[5]-u[2]*u[4]),-c*u[3],c*u[0],c*(u[2]*u[3]-u[0]*u[5])],a=[i[0]*a[0]+i[1]*a[1]+i[2],i[3]*a[0]+i[4]*a[1]+i[5]]);var u,c;if(o&&r===function(n){return t(n[0]*B,n[1]*B)}(l=o(a)))return l;var l,f=r.children;for(var s=0,h=f&&f.length;s<h;++s)if(l=n(f[s],e))return l}(n,[r,-e]);return o&&(o[0]*=B,o[1]*=B,o)});var i=r.geoProjection(e),a=[];return function n(t,e,o){var i,a,c=e.edges,l=c.length,f={type:"MultiPoint",coordinates:e.face},s=e.face.filter(function(n){return 90!==u(n[1])}),h=r.geoBounds({type:"MultiPoint",coordinates:s}),p=!1,g=-1,v=h[1][0]-h[0][0];e.centroid=180===v||360===v?[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]:r.geoCentroid(f);if(o)for(;++g<l&&c[g]!==o;);++g;for(var d=0;d<l;++d)a=c[(d+g)%l],Array.isArray(a)?(p||(t.point((i=r.geoInterpolate(a[0],e.centroid)(P))[0],i[1]),p=!0),t.point((i=r.geoInterpolate(a[1],e.centroid)(P))[0],i[1])):(p=!1,a!==o&&n(t,a,e))}({point:function(n,t){a.push([n,t])}},n),a.push(a[0]),i.preclip($({type:"Polygon",coordinates:[a]})),i.tree=function(){return n},i}function fn(n){return n.project.invert||n.children&&n.children.some(fn)}var sn=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],hn=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(n){return n.map(function(n){return sn[n]})});function pn(n,t){var r=F(1-y(t));return[2/S*n*r,S*(1-r)]}pn.invert=function(n,t){var r=(r=t/S-1)*r;return[r>0?n*F(E/r)/2:0,D(1-r)]};var gn=2/F(3);function vn(n,t){var r=pn(n,t);return[r[0]*gn,r[1]]}function dn(n,t){for(var r=0,e=n.length,o=0;r<e;++r)o+=n[r]*t[r];return o}function mn(n){return[l(n[1],n[0])*j,D(g(-1,v(1,n[2])))*j]}function yn(n){var t=n[0]*B,r=n[1]*B,e=f(r);return[e*f(t),e*y(t),y(r)]}function Mn(n,t,e,o){n=n||[],t=t||{features:[]},o=o||function(n,t){for(var e=1/0,o=-1,a=0;a<i.length;a++){var u=r.geoDistance(i[a].site,[n,t]);u<e&&(e=u,o=a)}return o},e=e||function(n){return r.geoGnomonic().scale(1).translate([0,0]).rotate([-n.site[0],-n.site[1]])};var i=[];function a(){i=t.features.map(function(n,t){var o=n.geometry.coordinates[0].slice(0,-1);return o.site=n.properties&&n.properties.sitecoordinates?n.properties.sitecoordinates:r.geoCentroid(n.geometry),{face:o,site:o.site,id:t,project:e(o)}}),n.forEach(function(n,t){var r=i[n];r&&(r.children||(r.children=[])).push(i[t])})}function u(n,t){return i[o(n*j,t*j)]}var c=r.geoGnomonic();return a(),function r(){var l=c.rotate(),f=c.translate(),s=c.center(),h=c.scale(),p=c.angle();return i.length&&(c=ln(i[0],u)),c.parents=function(t){return arguments.length?(n=t,a(),r()):n},c.polygons=function(n){return arguments.length?(t=n,a(),r()):t},c.faceProjection=function(n){return arguments.length?(e=n,a(),r()):e},c.faceFind=function(n){return arguments.length?(o=n,r()):o},c.rotate(l).translate(f).center(s).scale(h).angle(p)}()}function Pn(n){function t(t,r){if(u(u(r)-G)<P)return[0,r<0?-2:2];var e=y(r),o=d((1+e)/(1-e),n/2),i=.5*(o+1/o)+f(t*=n);return[2*y(t)/i,(o-1/o)/i]}return t.invert=function(t,r){var e=u(r);if(u(e-2)<P)return t?null:[0,m(r)*G];if(e>2)return null;var o=(t/=2)*t,i=(r/=2)*r,a=2*r/(1+o+i);return a=d((1+a)/(1-a),1/n),[l(2*t,1-o-i)/n,D((a-1)/(a+1))]},t}function An(n,t){return[n[0]*t[0]-n[1]*t[1],n[1]*t[0]+n[0]*t[1]]}function En(n,t){return[n[0]+t[0],n[1]+t[1]]}function Gn(n,t){return[n[0]-t[0],n[1]-t[1]]}function xn(n){return n[0]*n[0]+n[1]*n[1]}function wn(n,t){var r=u(n),e=u(t);return 0===n?p(e):0===t?p(r):r<3e3&&e<3e3?.5*p(n*n+t*t):p(n/f(l(t,n)))}function Sn(n,t){var r,e,o=n[1];if(0===(n=n[0])&&0===o)return[0,0];if("number"==typeof t&&(t=[t,0]),!t[1]){if(0===o&&n>=0)return[d(n,t[0]),0];if(0===n)switch((t[1]%4+4)%4){case 0:return[d(o,t[0]),0];case 1:return[0,d(o,t[0])];case 2:return[-d(o,t[0]),0];case 3:return[0,-d(o,t[0])]}}return r=l(o,n),e=wn(n,o),n=s(t[0]*e-t[1]*r),o=t[1]*e+t[0]*r,[n*f(o),n*y(o)]}vn.invert=function(n,t){return pn.invert(n/gn,t)};var Cn=[-.5,F(3)/2],jn=[1.7666387502854533,0],Bn=.09;var Dn=Pn?Pn(.5):null;function Nn(n,r){var e=Dn(n,r),o=function(n){var r=[0,0],e=Sn(Cn,t.scan([0,1,2].map(function(t){return-An(n,Sn(Cn,[t,0]))[0]}))),o=An(e,n);o=[1-o[0],-o[1]];for(var i=[1.44224957030741,.240374928384568,.0686785509670194,.0178055502507087,.00228276285265497,-.00148379585422573,-.00164287728109203,-.00102583417082273,-.000483607537673571,-.000167030822094781,-245024395166263e-19,214092375450951e-19,255897270486771e-19,173086854400834e-19,872756299984649e-20,318304486798473e-20,4.79323894565283e-7,-4.58968389565456e-7,-5.62970586787826e-7,-3.92135372833465e-7],a=[0,0],u=i.length;u--;)a=En([i[u],0],An(a,o));r=An(En(jn,An([-a[0],-a[1]],Sn(o,1-2/3))),An(e,e));var c=xn(n);if(c<Bn){var l=[1,1/3,5/27,10/81,22/243],f=Sn(n,[3,0]),s=[0,0];for(u=l.length;u--;)s=En([l[u],0],An(s,f));s=An(s,n),r=En(An(r,[c/Bn,0]),An(s,[1-c/Bn,0]))}return r}([e[1]/2,e[0]/2]);return[o[1],o[0]]}function Fn(n,t=40,r=A){return function(e,o,i=0,a=0){for(var c,l,f,s=0;s<t;s++){var h=n(i,a),p=h[0]-e,g=h[1]-o;if(u(p)<r&&u(g)<r)break;var v=p*p+g*g;if(v>c)i-=l/=2,a-=f/=2;else{c=v;var d=(i>0?-1:1)*r,m=(a>0?-1:1)*r,y=n(i+d,a),M=n(i,a+m),P=(y[0]-h[0])/d,A=(y[1]-h[1])/d,E=(M[0]-h[0])/m,G=(M[1]-h[1])/m,x=G*P-A*E,w=(u(x)<.5?.5:1)/x;if(i+=l=(g*E-p*G)*w,a+=f=(p*A-g*P)*w,u(l)<r&&u(f)<r)break}}return[i,a]}}function Rn(n,e){var o,i=[-.5,F(3)/2],a=[0,0],u=[0,0],c=An(r.geoStereographicRaw(n,e),[F(2),0]),l=t.scan([0,1,2].map(function(n){return-An(c,Sn(i,[n,0]))[0]})),f=Sn(i,[l,0]),s=F(xn(c));if(s>.3){var h=Gn([1,0],An(f,c)),p=[1.15470053837925,.192450089729875,.0481125224324687,.010309826235529,.000334114739114366,-.00150351632601465,-.0012304417796231,-.000675190201960282,-.000284084537293856,-821205120500051e-19,-159257630018706e-20,191691805888369e-19,173095888028726e-19,103865580818367e-19,470614523937179e-20,14413500104181e-19,1.92757960170179e-8,-3.82869799649063e-7,-3.57526015225576e-7,-2.2175964844211e-7],g=[0,0];for(o=p.length;o--;)g=En([p[o],0],An(g,h));a=Gn([1.4021821053254548,0],An(Sn(h,.5),g)),a=An(a,f),a=An(a,f)}if(s<.5){var v=[1,1/8,3/56,1/32,35/1664,63/4096,231/19456],d=Sn(c,[3,0]);for(o=v.length;o--;)u=En([v[o],0],An(u,d));u=An(u,c)}if(s<.3)return u;if(s>.5)return a;var m=(s-.3)/.2;return En(An(a,[m,0]),An(u,[1-m,0]))}var bn=Fn(Rn);Rn.invert=function(n,t){if(n>1.5)return!1;var r=bn(n,t,n,.5*t),e=Rn(r[0],r[1]);return e[0]-=n,e[1]-=t,e[0]*e[0]+e[1]*e[1]<1e-8?r:[-10,0]};var In=D(1/3),Tn=[[0,90],[-180,-In*j],[-60,-In*j],[60,-In*j]],qn=[[1,2,3],[0,2,1],[0,3,2],[0,1,3]].map(function(n){return n.map(function(n){return Tn[n]})});function On(){var n=F(3),t=F(5+2*F(5))/F(15),e=F(8)/F(5+F(5)),o=F(3+F(5))/F(5+F(5)),i=function(r,i){var a=f(i),u=t/(a*f(r)),c=a*y(r)*u,s=y(i)*u,h=l(2*s/n+e/3-e/2,o),p=l(c-s/n+e/3-e/2,o),g=l(e/3-c-s/n-e/2,o);return[n*(p-g),2*h-p-g]};return i.invert=function(n,t){if(n*n+t*t>5)return[0,3];var e=2.9309936378128416,o=r.geoGnomonicRaw.invert(n/e,t/e),a=0;do{var c=i(o[0],o[1]),l=n-c[0],f=t-c[1];o[0]+=.2*l,o[1]+=.2*f}while(a++<30&&u(l)+u(f)>P);return o},i}var kn=Math.hypot,zn=D(1/3),Ln=[[G,0,0,-G,0,F(3)],[-zn,0,E,G,0,-F(3)],[-zn,2*E/3,E,5*E/6,3,0],[-zn,-2*E/3,E,E/6,-3,0]],_n={sphereSym:3,planarSym:6,width:6,height:2*F(3),centrums:Ln,rotateOOB:function(n,t,r,e){return u(n)>this.width/2?[2*r-n,-t]:[-n,this.height*m(t)-t]},inBounds:()=>!0};function Kn(n){function t(t,r){const e=function(n,t,r){var e,o,i,a=100;r=void 0===r?0:+r,t=+t;do{(o=n(r))===(i=n(r+P))&&(i=o+P),r-=e=-1*P*(o-t)/(o-i)}while(a-- >0&&u(e)>P);return a<0?NaN:r}(n=>c((n-D(y(n)/F(3)))/E*F(12)),r,r/2),o=t/(F(3)/f(r));return[G-d(o,1/n)*c(F(2)/f(e)),e]}function r(n,t,r){if(null==r)return[n,t];const e=r[0],o=r[1],i=r[2];let a,u;return a=e==G?n:D(y(e)*y(n)+f(e)*f(n)*f(o-t)),e==G?u=t-o:e==-G?u=o-t-E:(u=N((f(e)*y(n)-y(e)*f(n)*f(o-t))/f(a))-E,isNaN(u)?u=f(o-t)>=0&&n<e||f(o-t)<0&&n<-e?0:-E:y(t-o)>0&&(u=-u)),[a,u-=i]}function e(t,e){const o=_n.width,i=_n.height,a=_n.sphereSym;let l=-1/0,s=-1/0,p=null;for(const n of Ln){const o=r(e,t,n);o[0]>l&&(l=o[0],s=o[1],p=n)}const g=h((s+E/a)/(2*E/a))*(2*E/a),v=function(t,r){const e=c((t-D(y(t)/F(3)))/E*F(12)),o=(G-r)/c(F(2)/f(t));return[d(o,n)*F(3)/f(e),e]}(s-g,l),m=v[0],M=v[1]+p[3]+g*a/_n.planarSym,P=p[4],A=p[5];let x=[m*f(M)+P,m*y(M)+A];return(u(x[0])>o/2||u(x[1])>i/2)&&(x=_n.rotateOOB(x[0],x[1],P,A)),x}return e.invert=function(n,r){if(isNaN(n)||isNaN(r))return null;const e=_n.planarSym;let o=1/0,i=null;for(const t of Ln){const e=kn(n-t[4],r-t[5]);e<o&&(o=e,i=t)}const a=i[3],c=i[4],s=i[5],p=kn(n-c,r-s),g=l(r-s,n-c)-a,v=h((g+E/e)/(2*E/e))*(2*E/e);let d=t(p,g-v);if(null==d)return null;d[1]=v*e/_n.sphereSym+d[1];let m=function(n,t){if(null==t)return n;let r=n[0],e=n[1];const o=t[0],i=t[1];e+=t[2];let a,c=D(y(o)*y(r)-f(o)*f(e)*f(r)),l=y(r)/f(o)/f(c)-M(o)*M(c);return[c,a=o==G?e+i:o==-G?-e+i+E:u(l)>1?0==e&&r<-o||0!=e&&r<o?i+E:i:y(e)>0?i+N(l):i-N(l),t[2]]}(d,i);return[m[1],m[0]]},e}function Qn(n,t){var r=Kn(n);const e=_n.height;function o(n,o){const i=r(n,o),a=[i[1],-i[0]];return a[1]>0&&(a[0]=e-a[0],a[1]*=-1),a[0]+=t,a[0]<0&&(a[0]+=2*e),a}return o.invert=function(n,o){return(n=(n-t)/e)>1.5&&(n-=2),n>.5&&(n=1-n,o*=-1),r.invert(-o,n*e)},o}var Vn=c(w)*j,Wn=[[0,Vn],[90,Vn],[180,Vn],[-90,Vn],[0,-Vn],[90,-Vn],[180,-Vn],[-90,-Vn]],Hn=[[0,3,2,1],[0,1,5,4],[1,2,6,5],[2,3,7,6],[3,0,4,7],[4,5,6,7]].map(function(n){return n.map(function(n){return Wn[n]})});function Jn(n){var t,r,e,o,i,a,c,l,s,h,p,g,v={lengthMG:n};function d(n,t){var r=n[0]-t[0],e=n[1]-t[1];return F(r*r+e*e)}function P(n,t,r,e){return[r[0]+(e[0]-r[0])*n/t,r[1]+(e[1]-r[1])*n/t]}function A(n,t,r,e){var o=M(t*B),i=M(e*B),a=[0,0];return a[0]=(o*n[0]-i*r[0]-n[1]+r[1])/(o-i),a[1]=o*(a[0]-n[0])+n[1],a}function E(n,t,r,e){var o,i,a=r[0],u=r[1],c=e[0],l=e[1],f=n[0],s=n[1],h=(c-a)*(c-a)+(l-u)*(l-u),p=2*((c-a)*(a-f)+(l-u)*(u-s)),g=p*p-4*h*(f*f+s*s+a*a+u*u-2*(f*a+s*u)-t*t);return 0===h?[0,[0,0]]:g<0?[0,[0,0]]:(o=(-p+F(g))/(2*h),i=(-p-F(g))/(2*h),0<=o&&o<=1?[1,[a+o*(c-a),u+o*(l-u)]]:0<=i&&i<=1?[1,[a+i*(c-a),u+i*(l-u)]]:[0,[0,0]])}function G(n,t){var r=[0,0];return-60===t?(r[0]=n[0]*v.cos60+n[1]*v.sin60,r[1]=-n[0]*v.sin60+n[1]*v.cos60):-120===t?(r[0]=-n[0]*v.cos60+n[1]*v.sin60,r[1]=-n[0]*v.sin60-n[1]*v.cos60):(r[0]=n[0]*f(t*B)-n[1]*y(t*B),r[1]=n[0]*y(t*B)+n[1]*f(t*B)),r}function x(n){var t=v.deltaMEq*n;return t<=v.lengthGF?[v.pointG[0],t]:P(t-=v.lengthGF,v.lengthAB,v.pointF,v.pointE)}function w(n){return x(n)}function S(n){return A(v.pointM,2*n/3,w(n),n/3)}function C(n){return 0===n?[v.pointA+v.lengthAB,0]:A(v.pointA,n,v.pointM,2*n/3)}function D(n){return d(w(n),S(n))}function N(n){return d(S(n),C(n))}function R(n){var t=[0,0],r=C(n),e=0,o=[0,0];return n<=30?(t[0]=v.pointA[0]+v.lengthAP73*f(n*B),t[1]=v.pointA[1]+v.lengthAP73*y(n*B),e=d(r,t)):(e=d(r,t=A(v.pointT,-60,r,n)),n>44&&(o=A(v.pointT,-60,r,2/3*n))[0]>t[0]&&(e=-d(r,t=o))),{parallel73:t,lengthParallel73:e}}function b(n){return[v.pointA[0]+v.lengthAP75*f(n*B),v.pointA[1]+v.lengthAP75*y(n*B)]}function I(n,t){var r,e=(r=(n+180)/90+1,Math[r>0?"floor":"ceil"](r)),o=(n+720)%90-45,i=m(o);return o=u(o),5===e&&(e=1),t<0&&(e=[0,6,7,8,5][e]),[o,u(t),i,e]}function T(n,t){var r,e,o,i,a,u=[0,0];return 0===n?u=t>=75?function(n,t){return[v.pointA[0]+104*(90-t),0]}(0,t):function(n,t){return[v.pointG[0]-100*t,0]}(0,t):t>=75?u=function(n,t){var r=104*(90-t);return[v.pointA[0]+r*f(n*B),v.pointA[1]+r*y(n*B)]}(n,t):0===t?u=function(n){return x(n)}(n):t>=73&&n<=30?u=function(n,t){var r=1560+100*(75-t);return[v.pointA[0]+r*f(n*B),v.pointA[1]+r*y(n*B)]}(n,t):45===n?u=t<=15?function(n,t){return P(t,15,v.pointE,v.pointD)}(0,t):t<=73?function(n,t){return P(t-15,58,v.pointD,v.pointT)}(0,t):function(n,t){var r=b(45),e=R(n).parallel73,o=d(v.pointT,v.pointB),i=d(v.pointB,r),a=(75-t)*(i+o)/2;return a<=i?P(a,i,r,v.pointB):P(a-=i,o,v.pointB,e)}(n,t):n<=29?u=function(n,t){var r=R(n),e=D(n),o=N(n),i=t*(e+o+r.lengthParallel73)/73;return i<=e?P(i,e,w(n),S(n)):i<=e+o?P(i-=e,o,S(n),C(n)):P(i=i-e-o,r.lengthParallel73,C(n),r.parallel73)}(n,t):t>=73?u=function(n,t){var r=b(n),e=d(C(n),r),o=R(n),i=o.parallel73,a=o.lengthParallel73,u=(75-t)*(e-a)/2;return u<=e?P(u,e,r,C(n)):P(u-=e,-a,C(n),i)}(n,t):(i=(e=E(v.pointC,v.radius,S(n),C(n)))[0],o=e[1],r=D(n),1===i?a=r+d(S(n),o):(i=(e=E(v.pointC,v.radius,w(n),S(n)))[0],o=e[1],a=r-d(S(n),o)),u=t<=15?function(n,t,r){var e=t*r/15,o=D(n),i=N(n);return e<=o?P(e,o,w(n),S(n)):P(e-=o,i,S(n),C(n))}(n,t,a):function(n,t,r){var e=R(n),o=e.parallel73,i=D(n),a=N(n),u=e.lengthParallel73,c=r+(t-15)*(i+a+u-r)/58;return c<=i?P(c,i,w(n),C(n)):c<=i+a?P(c-=i,a,S(n),C(n)):P(c=c-i-a,u,C(n),o)}(n,t,a)),u}function q(n,t){var r=I(n*j,t*j),e=r[0],o=r[1],i=r[2],a=r[3],u=T(e,o);return function(n,t){var r=[0,0];if(0===t)r=G(n,-60);else if(1===t)(r=G(n,-120))[0]-=v.lengthMG;else if(2===t)(r=G(n,-60))[0]-=v.lengthMG;else if(3===t)(r=G(n,-120))[0]+=v.lengthMG;else if(4===t)(r=G(n,-60))[0]+=v.lengthMG;else if(5===t)(r=G([2*v.lengthMG-n[0],n[1]],-60))[0]+=v.lengthMG;else if(6===t)(r=G([2*v.lengthMG-n[0],n[1]],-120))[0]-=v.lengthMG;else if(7===t)(r=G([2*v.lengthMG-n[0],n[1]],-60))[0]-=v.lengthMG;else{if(8!==t)return r;(r=G([2*v.lengthMG-n[0],n[1]],-120))[0]+=v.lengthMG}return r}([u[0],i*u[1]],a)}return g=F(3),v.lengthMA=.094*v.lengthMG,v.lengthParallel0to73At0=v.lengthMG/100,v.lengthParallel73to90At0=(v.lengthMG-v.lengthMA-73*v.lengthParallel0to73At0)/17,v.sin60=g/2,v.cos60=.5,v.pointM=[0,0],v.pointG=[v.lengthMG,0],t=[v.lengthMG,v.lengthMG*M(30*B)],v.pointA=[v.lengthMA,0],v.pointB=A(v.pointM,30,v.pointA,45),v.lengthAG=d(v.pointA,v.pointG),v.lengthAB=d(v.pointA,v.pointB),r=d(v.pointM,v.pointB),e=d(v.pointM,t),o=d(t,v.pointG),v.pointD=P(r,e,t,v.pointM),v.pointF=[v.lengthMG,o-r],v.pointE=[t[0]-v.lengthMA*y(30*B),t[1]-v.lengthMA*f(30*B)],v.lengthGF=d(v.pointG,v.pointF),v.lengthBD=d(v.pointB,v.pointD),v.lengthBDE=v.lengthBD+v.lengthAB,v.lengthGFE=v.lengthGF+v.lengthAB,v.deltaMEq=v.lengthGFE/45,v.lengthAP75=15*v.lengthParallel73to90At0,v.lengthAP73=v.lengthMG-v.lengthMA-73*v.lengthParallel0to73At0,i=[v.pointA[0]+v.lengthAP73*f(30*B),v.pointA[1]+v.lengthAP73*y(30*B)],v.pointT=A(i,-60,v.pointB,30),a=R(29),c=a.lengthParallel73,l=D(29),s=N(29),h=15*(l+s+c)/73,p=[0,0],v.pointC=[0,0],v.radius=0,p=P(h-=l,s,S(29),C(29)),v.pointC[1]=(p[0]*p[0]+p[1]*p[1]-v.pointD[0]*v.pointD[0]-v.pointD[1]*v.pointD[1])/(2*(g*p[0]+p[1]-g*v.pointD[0]-v.pointD[1])),v.pointC[0]=g*v.pointC[1],v.radius=d(v.pointC,v.pointD),q.invert=Fn(q),q}var Un=r.geoAzimuthalEqualAreaRaw,Xn=-.05,Yn=1e-10,Zn={angle:90,center:[0,5.022570623227068],scale:79.92959180396787,translate:[479.9999905630355,250.35977064160338]},$n=[[-180,-1e-4],[180,-1e-4],[1e-4,Xn],[-1e-4,Xn]],nt=5,tt=50;function rt(n=Un){function t(t,r){var e=n(t,r);return 0==(e=An(e,[f(-E/2),y(-E/2)]))[0]&&0==e[1]&&(e[0]+=Yn,e[1]+=Yn),[wn(e[0],e[1]),l(e[1],e[0])]}return t.invert=function(t,r){var e=[s(t)*f(r),s(t)*y(r)];return e=An(e,[f(E/2),y(E/2)]),n.invert(e[0],e[1])},t}n.geoClipPolygon=$,n.geoIntersectArc=function(n,t){var r=n.map(n=>O(n.map(n=>n*B))),e=t.map(n=>O(n.map(n=>n*B))),o=X(new U(r[0],r[1]),new U(e[0],e[1]));return o?T(o).map(n=>n*j):o},n.geoPolyhedral=ln,n.geoPolyhedralButterfly=function(n){n=n||function(n){var t=r.geoCentroid({type:"MultiPoint",coordinates:n});return r.geoGnomonic().scale(1).translate([0,0]).rotate([-t[0],-t[1]])};var t=hn.map(function(t){return{face:t,project:n(t)}});return[-1,0,0,1,0,1,4,5].forEach(function(n,r){var e=t[n];e&&(e.children||(e.children=[])).push(t[r])}),ln(t[0],function(n,r){return t[n<-E/2?r<0?6:4:n<0?r<0?2:0:n<E/2?r<0?3:1:r<0?7:5]}).angle(-30).scale(101.858).center([0,45])},n.geoPolyhedralCollignon=function(n){n=n||function(n){var t=r.geoCentroid({type:"MultiPoint",coordinates:n});return r.geoProjection(vn).translate([0,0]).scale(1).rotate(t[1]>0?[-t[0],0]:[180-t[0],180])};var t=hn.map(function(t){return{face:t,project:n(t)}});return[-1,0,0,1,0,1,4,5].forEach(function(n,r){var e=t[n];e&&(e.children||(e.children=[])).push(t[r])}),ln(t[0],function(n,r){return t[n<-E/2?r<0?6:4:n<0?r<0?2:0:n<E/2?r<0?3:1:r<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},n.geoPolyhedralWaterman=function(n){n=n||function(n){var t=6===n.length?r.geoCentroid({type:"MultiPoint",coordinates:n}):n[0];return r.geoGnomonic().scale(1).translate([0,0]).rotate([-t[0],-t[1]])};var t=hn.map(function(n){for(var t,r=n.map(yn),e=r.length,o=r[e-1],i=[],a=0;a<e;++a)t=r[a],i.push(mn([.9486832980505138*o[0]+.31622776601683794*t[0],.9486832980505138*o[1]+.31622776601683794*t[1],.9486832980505138*o[2]+.31622776601683794*t[2]]),mn([.9486832980505138*t[0]+.31622776601683794*o[0],.9486832980505138*t[1]+.31622776601683794*o[1],.9486832980505138*t[2]+.31622776601683794*o[2]])),o=t;return i}),e=[],o=[-1,0,0,1,0,1,4,5];t.forEach(function(n,r){for(var i,a,u=hn[r],c=u.length,l=e[r]=[],f=0;f<c;++f)t.push([u[f],n[(2*f+2)%(2*c)],n[(2*f+1)%(2*c)]]),o.push(r),l.push((i=yn(n[(2*f+2)%(2*c)]),a=yn(n[(2*f+1)%(2*c)]),[i[1]*a[2]-i[2]*a[1],i[2]*a[0]-i[0]*a[2],i[0]*a[1]-i[1]*a[0]]))});var i=t.map(function(t){return{project:n(t),face:t}});return o.forEach(function(n,t){var r=i[n];r&&(r.children||(r.children=[])).push(i[t])}),ln(i[0],function(n,t){var r=f(t),o=[r*f(n),r*y(n),y(t)],a=n<-E/2?t<0?6:4:n<0?t<0?2:0:n<E/2?t<0?3:1:t<0?7:5,u=e[a];return i[dn(u[0],o)<0?8+3*a:dn(u[1],o)<0?8+3*a+1:dn(u[2],o)<0?8+3*a+2:a]}).angle(-30).scale(110.625).center([0,45])},n.geoPolyhedralVoronoi=Mn,n.geoDodecahedral=function(){var n=D(1/F(3))*j,t=N((F(5)-1)/F(3)/2)*j,r=90-t,e=N(-(1+F(5))/F(3)/2)*j,o={type:"FeatureCollection",features:[[[45,n],[0,t],[180,t],[135,n],[90,r]],[[45,n],[r,0],[-r,0],[-45,n],[0,t]],[[45,n],[90,r],[90,-r],[45,-n],[r,0]],[[0,t],[-45,n],[-90,r],[-135,n],[180,t]],[[r,0],[45,-n],[0,-t],[-45,-n],[-r,0]],[[90,r],[135,n],[e,0],[135,-n],[90,-r]],[[45,-n],[90,-r],[135,-n],[180,-t],[0,-t]],[[135,n],[180,t],[-135,n],[-e,0],[e,0]],[[-45,n],[-r,0],[-45,-n],[-90,-r],[-90,r]],[[-45,-n],[0,-t],[180,-t],[-135,-n],[-90,-r]],[[135,-n],[e,0],[-e,0],[-135,-n],[180,-t]],[[-135,n],[-90,r],[-90,-r],[-135,-n],[-e,0]]].map(function(n){return n.push(n[0]),{geometry:{type:"Polygon",coordinates:[n]}}})};return Mn().parents([-1,0,4,8,1,2,2,3,1,8,6,3]).angle(108).polygons(o).scale(99.8).rotate([-8,0,-32])},n.geoCox=function(){var n=r.geoProjection(Nn),t=n.stream;return n.stream=function(e){var o=n.rotate(),i=t(e),a=(n.rotate([0,0]),t(e));return n.rotate(o),i.sphere=function(){var n;r.geoStream({type:"Polygon",coordinates:[[[0,90],[-180,-(n=2*D(1/F(5))*j)+P],[0,-90],[180,-n+P],[0,90]]]},a)},i},n.scale(188.305).translate([480,333.167])},n.geoCoxRaw=Nn,n.geoTetrahedralLee=function(){var n=function(n){var t=r.geoCentroid({type:"MultiPoint",coordinates:n}),e=[-t[0],-t[1],30];return 90==u(t[1])&&(e=[0,-t[1],-30]),r.geoProjection(Rn).scale(1).translate([0,0]).rotate(e)},t=qn.map(function(t){return{face:t,project:n(t)}});return[-1,0,0,0].forEach(function(n,r){var e=t[n];e&&(e.children||(e.children=[])).push(t[r])}),ln(t[0],function(n,e){n*=j,e*=j;for(var o=0;o<t.length;o++)if(r.geoContains({type:"Polygon",coordinates:[[qn[o][0],qn[o][1],qn[o][2],qn[o][0]]]},[n,e]))return t[o]}).rotate([30,180]).angle(30).scale(118.662).translate([480,195.47])},n.geoLeeRaw=Rn,n.geoGrayFullerRaw=On,n.geoAirocean=function(){var n,e,o,i;return(n=function(n){var t=n.centroid;return n.direction=Math.abs(t[1]-52.62)<1||Math.abs(t[1]+10.81)<1?0:60,r.geoProjection(On()).scale(1).translate([0,0]).rotate([-t[0],-t[1],n.direction||0])},e=c(.5)*j,o=[[0,90],[0,-90]].concat(t.range(10).map(function(n){return[(36*n+180)%360-180,1&n?e:-e]})),(i=[[0,3,11],[0,5,3],[0,7,5],[0,9,7],[0,11,9],[2,11,3],[3,4,2],[4,3,5],[5,6,4],[6,5,7],[7,8,6],[8,7,9],[9,10,8],[10,9,11],[11,2,10],[1,2,4],[1,4,6],[1,6,8],[1,8,10],[1,10,2]].map(function(n){return n.map(function(n){return o[n]})})).forEach(function(n){n.centroid=r.geoCentroid({type:"MultiPoint",coordinates:n})}),function(){var n,t,e,o;o=(n=i[15]).centroid,t=n.slice(),n[0]=o,(n=[t[0],o,t[2]]).centroid=o,i.push(n),(n=[t[0],t[1],o]).centroid=o,i.push(n),o=(n=i[14]).centroid,t=n.slice();var a=r.geoGnomonic().scale(1).translate([0,0]).rotate([-o[0],-o[1]]),u=a(n[1]),c=a(n[2]);e=a.invert([(u[0]+c[0])/2,(u[1]+c[1])/2]),n[1]=e,(n=[t[0],t[1],e]).centroid=o,i.push(n),o=(n=i[19]).centroid,t=n.slice(),n[1]=e,(n=[e,t[0],t[1]]).centroid=o,i.push(n)}(),function(n){n=n||function(n){var t=n.centroid;return r.geoGnomonic().scale(1).translate([0,0]).rotate([-t[0],-t[1]])};var t=i.map(function(t,e){var o=t.slice();return o.push(o[0]),{face:t,site:t.centroid,id:e,contains:function(n,t){return r.geoContains({type:"Polygon",coordinates:[o]},[n*j,t*j])},project:n(t)}});[-1,0,1,11,13,6,7,1,7,8,9,10,11,12,13,6,8,10,17,21,16,15,19,19].forEach(function(n,r){var e=t[n];e&&(e.children||(e.children=[])).push(t[r])});var e=ln(t[0],function(n,r){for(var e=0;e<t.length;e++)if(t[e].contains(n,r))return t[e]});return e.faces=t,e}(n)).rotate([-83.65929,25.44458,-87.45184]).angle(-60).scale(45.4631).center([126,0])},n.geoIcosahedral=function(){var n=c(.5)*j,t=[[0,90],[0,-90]].concat([0,1,2,3,4,5,6,7,8,9].map(function(t){return[(36*t+180)%360-180,1&t?n:-n]})),r={type:"FeatureCollection",features:[[0,3,11],[0,5,3],[0,7,5],[0,9,7],[0,11,9],[2,11,3],[3,4,2],[4,3,5],[5,6,4],[6,5,7],[7,8,6],[8,7,9],[9,10,8],[10,9,11],[11,2,10],[1,2,4],[1,4,6],[1,6,8],[1,8,10],[1,10,2]].map(function(n){return n.map(function(n){return t[n]})}).map(function(n){return n.push(n[0]),{geometry:{type:"Polygon",coordinates:[n]}}})};return Mn().parents([-1,7,9,11,13,0,5,6,7,8,9,10,11,12,13,6,8,10,12,14]).angle(0).polygons(r).rotate([108,0]).scale(131.777).center([162,0])},n.geoImago=function(){var n=.59,t=1.16,e=r.geoProjectionMutator(Qn),o=e(n,t);function i(n){const r=100+2*P,e=[],o=n.scale(),i=n.center(),a=n.translate(),u=n.rotate();n.scale(1).center([0,90]).rotate([0,0]).translate([t,0]);for(let t=r-P;t>0;t--)e.unshift(n.invert([1.5*_n.height-.003,_n.width/2*t/r])),e.push(n.invert([-.5*_n.height+.003,_n.width/2*t/r]));return e.push(e[0]),n.scale(o).center(i).translate(a).rotate(u).preclip($({type:"Polygon",coordinates:[e]}))}return o.shift=function(r){return arguments.length?i(e(n,t=+r)):t},o.k=function(r){return arguments.length?i(e(n=+r,t)):n},i(o).rotate([18,-12.5,3.5]).scale(138.42).translate([480,250]).center([-139.405,40.5844])},n.geoImagoBlock=function(){var n=.68,t=r.geoProjectionMutator(Kn),e=t(n);e.k=function(r){return arguments.length?t(n=+r):n};var o=-c(1/F(2))*j,i=[[-180+P,o+P],[0,90],[180-P,o+P],[180-P,o-P],[-180+P,o-P],[-180+P,o+P]];return e.preclip($({type:"Polygon",coordinates:[i]})).scale(144.04).rotate([18,-12.5,3.5]).center([0,35.2644])},n.geoImagoRaw=Kn,n.geoCubic=function(){var n={type:"FeatureCollection",features:Hn.map(function(n){return(n=n.slice()).push(n[0]),{geometry:{type:"Polygon",coordinates:[n]}}})};return Mn().polygons(n).parents([-1,0,1,5,3,2]).angle(0).scale(96.8737).center([135,-45]).rotate([120,0])},n.geoCahillKeyes=function(n){n=n||function(){return r.geoProjectionMutator(Jn)(1e4).scale(1)};var t=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],e=(t=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(n){return n.map(function(n){return t[n]})})).map(function(n){for(var t,r=n.map(k),e=r.length,o=r[e-1],i=17*B,a=f(i),u=y(i),c=[],l=0;l<e;++l)t=r[l],c.push(q([o[0]*a+t[0]*u,o[1]*a+t[1]*u,o[2]*a+t[2]*u]),q([t[0]*a+o[0]*u,t[1]*a+o[1]*u,t[2]*a+o[2]*u])),o=t;return c}),o=[],i=[-1,3,0,2,0,1,4,5];e.forEach(function(n,r){for(var a=t[r],u=a.length,c=o[r]=[],l=0;l<u;++l)e.push([a[l],n[(2*l+2)%(2*u)],n[(2*l+1)%(2*u)]]),i.push(r),c.push(L(k(n[(2*l+2)%(2*u)]),k(n[(2*l+1)%(2*u)])))});var a=e.map(function(t){return{project:n(t),face:t}});return i.forEach(function(n,t){var r=a[n];r&&(r.children||(r.children=[])).push(a[t])}),ln(a[0],function(n,t){var r=f(t),e=[r*f(n),r*y(n),y(t)],i=n<-E/2?t<0?6:4:n<0?t<0?2:0:n<E/2?t<0?3:1:t<0?7:5,u=o[i];return a[z(u[0],e)<0?8+3*i:z(u[1],e)<0?8+3*i+1:z(u[2],e)<0?8+3*i+2:i]}).scale(.023975).rotate([20,0]).center([0,-17])},n.geoCahillKeyesRaw=Jn,n.geoComplexLog=function(n=Un,t=Xn){var e=r.geoProjectionMutator(rt),o=e(n);function i(n){var r=n.angle(),e=n.scale(),o=n.center(),i=n.translate(),a=n.rotate();n.angle(Zn.angle).scale(1).center([0,0]).rotate([0,0]).translate([0,0]).preclip();var c=n($n[0]),l=n($n[1]),f=n([$n[2][0],t]),s=n([$n[3][0],t]),h=u(l[0]-c[0]),p=u(f[1]-l[1]),g={type:"Polygon",coordinates:[[c,...Array.from({length:nt},(n,t)=>[f[0],f[1]-p*(nt-t)/nt]),...Array.from({length:tt},(n,t)=>[f[0]-h*t/tt,f[1]]),...Array.from({length:nt},(n,t)=>[s[0],s[1]-p*t/nt]),c].map(t=>n.invert(t))]};return n.angle(r).scale(e).center(o).translate(i).rotate(a).preclip($(g))}return o.planarProjectionRaw=function(t){return arguments.length?i(e(n=t)):n},o.cutoffLatitude=function(r){return arguments.length?(t=r,i(e(n))):t},i(o).angle(Zn.angle).center(Zn.center).scale(Zn.scale).translate(Zn.translate)},n.geoComplexLogRaw=rt,Object.defineProperty(n,"__esModule",{value:!0})});
